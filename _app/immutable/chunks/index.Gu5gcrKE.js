var H=Object.defineProperty;var R=(o,r,t)=>r in o?H(o,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[r]=t;var n=(o,r,t)=>(R(o,typeof r!="symbol"?r+"":r,t),t);function f(o){const r=o.unit??"mm";return o.valueOf()+r}let I=class{constructor(){n(this,"_bold",!1);n(this,"_color","");n(this,"_italic",!1);n(this,"_underline",!1);n(this,"_strikethrough",!1);n(this,"_size","inherit")}bold(){return h(this,"bold",[],arguments),this._bold=!0,this}color(r){return h(this,"color",["string"],arguments),this._color=r,this}italic(){return h(this,"italic",[],arguments),this._italic=!0,this}size(r){return h(this,"size",["number"],arguments),this._size=f(r),this}underline(){return h(this,"underline",[],arguments),this._underline=!0,this}strikethrough(){return h(this,"strikethrough",[],arguments),this._strikethrough=!0,this}};function h(o,r,t,i){i=Array.from(i),t.length!=i.length&&b(o,r,`passed it ${i.length} arguments,
			but it must be passed ${t.length} arguments.
			You passed it (${i.map(e=>S(e)).join(", ")}),
			and it has to be passed (${t.join(", ")})`);for(const[e,s]of t.entries()){const a=i[e],l=S(a);if(l=="Updater")continue;const c=G(a);c!=s&&b(o,r,`as argument ${e+1} you passed it a ${c} value (${l}), but it must be a ${s}`)}}function b(o,r,t){throw`On ${o._specificTypeName} you called ${r}() and ${t}`}function S(o){return o===null?"null":o===void 0?"undefined":o.proxyName?o.proxyName:o!=null&&o._specificTypeName?o._specificTypeName:o instanceof I?"Font":JSON.stringify(o,null," ")}function G(o){return o===null?"null":o===void 0?"undefined":o.proxyGetPageAndArgs?"Page":o!=null&&o._generalTypeName?o._generalTypeName:o instanceof Number?"number":o instanceof I?"Font":o instanceof Function?o.constructor.name:typeof o}class m{constructor(){n(this,"_generalTypeName","Component");n(this,"_specificTypeName","Component");n(this,"_backgroundColor","transparent");n(this,"_grow",0);n(this,"_growShrink",!1);n(this,"_cornerRadius","0vw");n(this,"_showIf",!0);n(this,"_keepIf",!0);n(this,"_font",null);n(this,"_onChildUpdated",null);n(this,"_paddingLeft","0mm");n(this,"_paddingRight","0mm");n(this,"_paddingTop","0mm");n(this,"_paddingBottom","0mm");n(this,"_borderLeft","0mm solid black");n(this,"_borderRight","0mm solid black");n(this,"_borderTop","0mm solid black");n(this,"_borderBottom","0mm solid black")}backgroundColor(r){return h(this,"backgroundColor",["string"],arguments),this._backgroundColor=r,this}grow(r){return h(this,"grow",["number"],arguments),this._grow=r,this}growShrink(r){return h(this,"growShrink",["number"],arguments),this._grow=r,this._growShrink=!0,this}cornerRadius(r){return h(this,"cornerRadius",["number"],arguments),this._cornerRadius=f(r),this}showIf(r){return h(this,"showIf",["boolean"],arguments),this._showIf=r,this}keepIf(r){return h(this,"keepIf",["boolean"],arguments),this._keepIf=r,this}padding(r,t="lrtb"){return arguments.length==1?this.padding(r,t):(h(this,"padding",["number","string"],arguments),/^[lrtb]{0,4}$/.test(t)||b(this,"padding",`as the second argument, you passed it ${JSON.stringify(t)}, but it may only contain the letters l, r, t and b`),t.includes("l")&&(this._paddingLeft=f(r)),t.includes("r")&&(this._paddingRight=f(r)),t.includes("t")&&(this._paddingTop=f(r)),t.includes("b")&&(this._paddingBottom=f(r)),this)}border(r,t,i="lrtb"){return arguments.length==2?this.border(r,t,i):(h(this,"border",["number","string","string"],arguments),/^[lrtb]{0,4}$/.test(i)||b(this,"border",`as the third argument, you passed it ${JSON.stringify(i)}, but it may only contain the letters l, r, t and b`),i.includes("l")&&(this._borderLeft=`${f(r)} solid ${t}`),i.includes("r")&&(this._borderRight=`${f(r)} solid ${t}`),i.includes("t")&&(this._borderTop=`${f(r)} solid ${t}`),i.includes("b")&&(this._borderBottom=`${f(r)} solid ${t}`),this)}font(r){return h(this,"font",["Font"],arguments),this._font=r,this}onAfter(r,t){}createAfterDirections(){return[]}createElement(r,t,i){}getGrow(){return this._grow}getGrowShrink(){return this._growShrink}}function z(o){return Object.fromEntries(Object.entries(o).filter(([r,t])=>!(t instanceof Function)))}class O{constructor(r,t){n(this,"frameworkApp",null);n(this,"Page",null);n(this,"page",null);n(this,"beforeDirections",[]);n(this,"rootGuiComponent",null);n(this,"afterDirections",[]);n(this,"currentlyRunningIntervalIds",[]);this.frameworkApp=r,this.Page=t}createPageInstance(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.frameworkApp.pageStates[this.Page.proxyName]){const{Page:i,args:e}=this.Page.proxyGetPageAndArgs;this.page=new i,this.restoreState(),Object.assign(this.page,e)}else{try{r("framework",`Initializing variables in ${this.Page.proxyName}...`);const{Page:i,args:e}=this.Page.proxyGetPageAndArgs;this.page=new i,Object.assign(this.page,e)}catch(i){t(`An error ocurred while initializing variables in ${this.Page.proxyName}: ${i}.`);return}r("framework",`Initializing variables in ${this.Page.proxyName}... ✅`)}}loadFromState(){this.page=Object.create(this.Page.prototype),this.restoreState(),this.initializeTheRest()}createBeforeDirections(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.Page.prototype.hasOwnProperty("createBeforeDirections")){let i;try{r("framework",`Calling ${this.Page.proxyName}.createBeforeDirections()...`),i=this.page.createBeforeDirections(),r("framework",`Calling ${this.Page.proxyName}.createBeforeDirections()... ✅`)}catch(e){t(`Error in ${this.Page.proxyName}.createBeforeDirections(): ${e}.`);return}this.beforeDirections.push(...i)}}createAfterDirections(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.Page.prototype.hasOwnProperty("createAfterDirections")){let i;try{r("framework",`Calling ${this.Page.proxyName}.createAfterDirections()...`),i=this.page.createAfterDirections(),r("framework",`Calling ${this.Page.proxyName}.createAfterDirections()... ✅`)}catch(e){t(`Error in ${this.Page.proxyName}.createAfterDirections(): ${e}.`);return}this.afterDirections.push(...i)}}refreshAfterDirections(){this.afterDirections=[],this.createAfterDirections(),this.afterDirections.push(...this.rootGuiComponent.createAfterDirections())}getFirstTrueBeforeDirection(){return this.beforeDirections.find(r=>r.getCondition())}runOnBefore(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.Page.prototype.hasOwnProperty("onBefore"))try{r("framework",`Calling ${this.Page.proxyName}.onBefore()...`),this.page.onBefore(),r("framework",`Calling ${this.Page.proxyName}.onBefore()... ✅`)}catch(i){t(`Error in ${this.Page.proxyName}.onBefore(): ${i}.`);return}}runOnUpdate(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.Page.prototype.hasOwnProperty("onUpdate"))try{r("framework",`Calling ${this.Page.proxyName}.onUpdate()...`),this.page.onUpdate(this.frameworkApp.runtimeSettings.state.pages[this.Page.proxyName],this.frameworkApp.runtimeSettings.state.version),r("framework",`Calling ${this.Page.proxyName}.onUpdate()... ✅`)}catch(i){t(`Error in ${this.Page.proxyName}.onUpdate(): ${i}.`);return}}initializeTheRest(){const{onLog:r,onError:t,onPageShow:i}=this.frameworkApp.runtimeSettings;if(this.currentlyRunningIntervalIds=[],!this.Page.prototype.hasOwnProperty("createGui")){t(`Error: ${this.Page.proxyName}.createGui() is missing!`);return}try{r("framework",`Calling ${this.Page.proxyName}.createGui()...`),this.rootGuiComponent=this.page.createGui()}catch(e){t(`Error in ${this.Page.proxyName}.createGui(): ${e}.`);return}if(!(this.rootGuiComponent instanceof m)){t(`Error in ${this.Page.proxyName}.createGui(): must return a GUI component.`);return}r("framework",`Calling ${this.Page.proxyName}.createGui()... ✅`),i(),this.createAfterDirections(),this.afterDirections.push(...this.rootGuiComponent.createAfterDirections())}runOnAfter(){const{onLog:r,onError:t}=this.frameworkApp.runtimeSettings;if(this.rootGuiComponent.onAfter(this.frameworkApp.app,this.page),this.Page.prototype.hasOwnProperty("onAfter"))try{r("framework",`Calling ${this.Page.proxyName}.onAfter()...`),this.page.onAfter(),r("framework",`Calling ${this.Page.proxyName}.onAfter()... ✅`)}catch(i){t(`Error in ${this.Page.proxyName}.onAfter(): ${i}.`);return}}getFirstTrueAfterDirection(){return this.afterDirections.find(r=>r.getCondition())}rememberState(){this.frameworkApp.pageStates[this.Page.proxyName]=z(this.page)}restoreState(){const r=this.frameworkApp.pageStates[this.Page.proxyName]??{};Object.assign(this.page,r)}stopUpdaters(){for(const r of this.currentlyRunningIntervalIds)clearInterval(r)}createElement(){const r=document.createElement("div");r.classList.add("page"),r.style.display="grid",r.style.gridTemplateRows="1fr",r.style.gridTemplateColumns="1fr",r.style.height="100%";const t=this.rootGuiComponent.createElement(this.frameworkApp,this,null);return r.appendChild(t),r}}let P=class A{constructor(){n(this,"lengthInMs",0)}addMilliseconds(r){return this.lengthInMs+=r,this}addSeconds(r){return this.addMilliseconds(r*1e3)}addMinutes(r){return this.addSeconds(r*60)}addHours(r){return this.addMinutes(r*60)}addDays(r){return this.addHours(r*24)}addWeeks(r){return this.addDays(r*7)}getMilliseconds(){return this.lengthInMs%1e3}getSeconds(){return Math.floor(this.lengthInMs/1e3)%60}getMinutes(){return Math.floor(this.lengthInMs/(1e3*60))%60}getHours(){return Math.floor(this.lengthInMs/(1e3*60*60))%24}getDays(){return Math.floor(this.lengthInMs/(1e3*60*60*24))%7}getWeeks(){return Math.floor(this.lengthInMs/(1e3*60*60*24*7))}getTotalMilliseconds(){return this.lengthInMs}getTotalSeconds(){return this.lengthInMs/1e3}getTotalMinutes(){return this.getTotalSeconds()/60}getTotalHours(){return this.getTotalMinutes()/60}getTotalDays(){return this.getTotalHours()/24}getTotalWeeks(){return this.getTotalDays()/7}toJSON(){try{return{clazyName:A.name,lengthInMs:this.lengthInMs}}catch{return{clazyName:A.name,lengthInMs:"invalid"}}}static fromJSON(r){const t=new A;return t.lengthInMs=r.lengthInMs,t}valueOf(){return this.lengthInMs}isEquallyLongAs(r){return+this<+r}isShorterThan(r){return+this==+r}isShorterThanOrEquallyLongAs(r){return+this<=+r}getAsString(){if(this.lengthInMs==0)return"0 seconds";const t=[["week",this.getWeeks],["day",this.getDays],["hour",this.getHours],["minute",this.getMinutes],["second",this.getSeconds],["millisecond",this.getMilliseconds]].map(([e,s])=>[e,s.apply(this)]).filter(([e,s])=>s!=0).map(([e,s])=>`${s} ${e}${s==1?"":"s"}`);if(t.length==1)return t[0];const i=t.pop();return`${t.join(", ")} and ${i}`}};const Y=-62135600008e3;let W=class C{constructor(){n(this,"date",new Date(Y))}getDate(){return this.date.toLocaleDateString()}getYear(){return this.date.getFullYear()}getMonth(){return this.date.getMonth()+1}getDay(){return this.date.getDate()}getClock(){return this.date.toLocaleTimeString()}getHour(){return this.date.getHours()}getMinute(){return this.date.getMinutes()}getSecond(){return this.date.getSeconds()}getMillisecond(){return this.date.getMilliseconds()}getCopy(){const r=new C;return r.date.setTime(this.date.getTime()),r}setNow(){return this.date.setTime(Date.now()),this}setDate(r,t,i){return this.date.setFullYear(r,t-1,i),this}setYear(r){return this.date.setFullYear(r),this}setMonth(r){return this.date.setMonth(r-1),this}setDay(r){return this.date.setDate(r),this}setClock(r,t,i){return this.date.setHours(r,t,i),this}setHour(r){return this.date.setHours(r),this}setMinute(r){return this.date.setMinutes(r),this}setSecond(r){return this.date.setSeconds(r),this}setMillisecond(r){return this.date.setMilliseconds(r),this}toJSON(){try{return{clazyName:C.name,iso:this.date.toISOString()}}catch{return{clazyName:C.name,iso:"invalid"}}}static fromJSON(r){const t=new C;return t.date=new Date(r.iso),t}valueOf(){return this.date.getTime()}isSameAs(r){return+this==+r}isBefore(r){return+this<+r}isBeforeOrSameAs(r){return+this<=+r}addMilliseconds(r){return this.date.setMilliseconds(this.date.getMilliseconds()+r),this}addSeconds(r){return this.date.setSeconds(this.date.getSeconds()+r),this}addMinutes(r){return this.date.setMinutes(this.date.getMinutes()+r),this}addHours(r){return this.date.setHours(this.date.getHours()+r),this}addDays(r){return this.date.setDate(this.date.getDate()+r),this}addMonths(r){return this.date.setMonth(this.date.getMonth()+r),this}addYears(r){return this.date.setFullYear(this.date.getFullYear()+r),this}getDurationTo(r){const t=new P;return t.addMilliseconds(Math.abs(this.date-r.date)),t}};class x{constructor(){n(this,"_generalTypeName","PaperFigure");n(this,"_specificTypeName","PaperFigure");n(this,"_backgroundColor","black");n(this,"_onClickFunction",null);n(this,"_onClickArguments",[])}backgroundColor(r){return h(this,"backgroundColor",["string"],arguments),this._backgroundColor=r,this}onClick(r,...t){const i=arguments.length==0?[]:[r];return h(this,"onClick",["Function"],i),this._onClickFunction=r,this._onClickArguments=t,this}createElement(r,t,i=!0){const e=document.createElementNS("http://www.w3.org/2000/svg",t);return this._onClickFunction&&i&&e.addEventListener("click",()=>{try{this._onClickFunction(...this._onClickArguments)}catch(s){r.runtimeSettings.onError(`Error in the method ${this._onClickFunction.name}() passed to ${this._specificTypeName}.onClick(): ${s.toString()}`);return}}),e}}function _(o,r){var i,e,s,a,l,c;const{style:t}=r;t.boxSizing="border-box",t.backgroundColor=o._backgroundColor,t.borderRadius=o._cornerRadius,o._showIf===!1&&(t.visibility="hidden"),t.paddingLeft=o._paddingLeft,t.paddingRight=o._paddingRight,t.paddingTop=o._paddingTop,t.paddingBottom=o._paddingBottom,t.borderLeft=o._borderLeft,t.borderRight=o._borderRight,t.borderTop=o._borderTop,t.borderBottom=o._borderBottom,r.style.color=((i=o._font)==null?void 0:i._color)||r.style.color,r.style.fontWeight=(e=o._font)!=null&&e._bold?"bold":"normal",r.style.fontStyle=(s=o._font)!=null&&s._italic?"italic":"normal",r.style.fontSize=((a=o._font)==null?void 0:a._size)??"inherit",r.style.textDecoration=((l=o._font)!=null&&l._underline?"underline ":"")+((c=o._font)!=null&&c._strikethrough?"line-through ":"")}class v extends x{constructor(){super();n(this,"_specificTypeName","PaperGroup");n(this,"_width",null);n(this,"_height",null);n(this,"_coordinatesWidth",10);n(this,"_coordinatesHeight",10);n(this,"_centerX",null);n(this,"_centerY",null);n(this,"_children",[]);n(this,"_showCoordinates",!1);this._backgroundColor=null}width(t){return h(this,"width",["number"],arguments),this._width=t,this}height(t){return h(this,"height",["number"],arguments),this._height=t,this}coordinateSystem(t,i){return h(this,"coordinateSystem",["number","number"],arguments),this._coordinatesWidth=t,this._coordinatesHeight=i,this}showCoordinates(){return h(this,"showCoordinates",[],arguments),this._showCoordinates=!0,this}center(t,i){return h(this,"center",["number","number"],arguments),this._centerX=t,this._centerY=i,this}children(...t){const i=t.flat(1/0);return h(this,"children",i.map(e=>"PaperFigure"),arguments),this._children=i.filter(e=>e),this}createElement(t,i){const e=super.createElement(t,"svg",!1);if(e.setAttribute("class","paper-group"),e.setAttribute("preserveAspectRatio","none"),i._specificTypeName=="Paper")e.setAttribute("width","100%"),e.setAttribute("height","100%");else{const a=i,l=this._width??a._coordinatesWidth,c=this._height??a._coordinatesHeight,d=this._centerX??a._coordinatesWidth/2,g=this._centerY??a._coordinatesHeight/2;e.setAttribute("x",`${d-l/2}`),e.setAttribute("y",`${a._coordinatesHeight-(g+c/2)}`),e.setAttribute("width",`${l}`),e.setAttribute("height",`${c}`)}e.setAttribute("viewBox",`0 0 ${this._coordinatesWidth} ${this._coordinatesHeight}`);const s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x","0%"),s.setAttribute("y","0%"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("fill",this._backgroundColor??"transparent"),e.appendChild(s);for(const a of this._children)e.appendChild(a.createElement(t,this));if(this._onClickFunction&&e.addEventListener("click",a=>{const l=e.getBoundingClientRect(),c=a.clientX-l.left,d=a.clientY-l.top,g=c/l.width,u=d/l.height,E=g*this._coordinatesWidth,$=this._coordinatesHeight-u*this._coordinatesHeight;try{this._onClickFunction(E,$,...this._onClickArguments)}catch(N){const T=i._specificTypeName=="Paper"?"Paper":"PaperGroup";t.runtimeSettings.onError(`Error in the method ${this._onClickFunction.name}() passed to ${T}.onClick(): ${N.toString()}`);return}}),this._showCoordinates){const a=this._coordinatesWidth,l=this._coordinatesHeight,c=Math.min(a,l)/100;for(let g=0;g<a+1;g++){const u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1",`${100/a*g}%`),u.setAttribute("y1","0%"),u.setAttribute("x2",`${100/a*g}%`),u.setAttribute("y2","100%"),u.setAttribute("stroke-width",`${c}`),u.setAttribute("stroke","black"),u.setAttribute("stroke-linecap","round"),e.appendChild(u)}for(let g=0;g<l+1;g++){const u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("x1","0"),u.setAttribute("y1",`${g}`),u.setAttribute("x2",`${a}`),u.setAttribute("y2",`${g}`),u.setAttribute("stroke-width",`${c}`),u.setAttribute("stroke","black"),u.setAttribute("stroke-linecap","round"),e.appendChild(u)}const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.setAttribute("x","98%"),d.setAttribute("y","2%"),d.setAttribute("text-anchor","end"),d.setAttribute("dominant-baseline","hanging"),d.setAttribute("font-size",`${Math.min(a,l)/10}`),d.style.pointerEvents="none",e.appendChild(d),e.addEventListener("mousemove",g=>{const u=g.currentTarget.getBoundingClientRect(),E=g.clientX-u.left,$=g.clientY-u.top,N=E/u.width,T=$/u.height,F=N*this._coordinatesWidth,L=this._coordinatesHeight-T*this._coordinatesHeight;d.textContent=`x=${F.toFixed(1)} y=${L.toFixed(1)}`}),e.addEventListener("mouseleave",()=>{d.textContent=""})}return e}}class X extends m{constructor(){super();n(this,"_specificTypeName","Paper");n(this,"_paperGroup");this._grow=1,this._paperGroup=new v}showCoordinates(){return h(this,"showCoordinates",[],arguments),this._paperGroup.showCoordinates(),this}coordinateSystem(t,i){return h(this,"coordinateSystem",["number","number"],arguments),this._paperGroup.coordinateSystem(t,i),this}children(...t){const i=t.flat(1/0);return h(this,"children",i.map(e=>"PaperFigure"),arguments),this._paperGroup.children(...t),this}onClick(t){return h(this,"onClick",["Function"],arguments),this._paperGroup.onClick(t),this}backgroundColor(t){return h(this,"backgroundColor",["string"],arguments),this._paperGroup.backgroundColor(t),this}createElement(t,i){const e=document.createElement("div");e.classList.add("paper"),e.style.display="block",e.style.overflow="hidden",e.style.containerType="size";const s=this._paperGroup.createElement(t,this);return e.appendChild(s),_(this,e),e}getAsSvgString(){const t=this.createElement().firstChild;return new XMLSerializer().serializeToString(t)}}function k(o){return new Proxy(function(){},{get(t,i,e){const s=new o;return s[i].bind(s)}})}let U=class{constructor(){n(this,"_Page",null);n(this,"_condition",!0);n(this,"_description","")}page(r){return h(this,"page",["Page"],arguments),this._Page=r,this}when(r){return h(this,"when",["boolean"],arguments),this._condition=r,this}text(r){return h(this,"text",["string"],arguments),this._description=r,this}getPage(){return this._Page}getCondition(){return this._condition}getDescription(){return this._description}};function p(o){return new Proxy(o,{get(t,i,e){const s=new o;return s[i]instanceof Function?s[i].bind(s):s[i]},getPrototypeOf(t){return o.prototype}})}function D(o){let r=j(o);for(r=r.replaceAll(/\[b\](.+?)\[\/b\]/g,"<b>$1</b>"),r=r.replaceAll(/\[i\](.+?)\[\/i\]/g,"<i>$1</i>"),r=r.replaceAll(/\[u\](.+?)\[\/u\]/g,"<u>$1</u>"),r=r.replaceAll(/\[s\](.+?)\[\/s\]/g,"<s>$1</s>"),r=r.replaceAll(/\[url\](http.+?)\[\/url\]/g,'<a href="$1" target="_blank">$1</a>'),r=r.replaceAll(/\[url=(http.+?)\](.+?)\[\/url\]/g,'<a href="$1" target="_blank">$2</a>');/\[size=([0-9]+)\](.*?)\[\/size\]/.test(r);)r=r.replaceAll(/\[size=([0-9]+)\](.*?)\[\/size\]/g,'<span style="font-size: $1mm">$2</span>');for(;/\[color=(.*?)\](.+?)\[\/color\]/.test(r);)r=r.replaceAll(/\[color=(.*?)\](.+?)\[\/color\]/g,'<span style="color: $1">$2</span>');return r}function j(o){return o=o.replaceAll("&","&amp;"),o=o.replaceAll("<","&lt;"),o=o.replaceAll(">","&gt;"),o=o.replaceAll('"',"&quot;"),o=o.replaceAll("'","&apos;"),o}class q extends m{constructor(){super();n(this,"_specificTypeName","Button");n(this,"wasClicked",!1);n(this,"_text","");n(this,"_onClickFunction",null);n(this,"_onClickArguments",[]);n(this,"_page",null);n(this,"_stay",!1);n(this,"_useBBCode",!1);this.backgroundColor("#e7e7e7"),this.border(.6,"black"),this.cornerRadius(4),this.padding(1.5,"tb").padding(3,"lr")}text(t){return h(this,"text",["string"],arguments),this._text=t,this._useBBCode=!1,this}textWithBBCode(t){return h(this,"textWithBBCode",["string"],arguments),this._text=t,this._useBBCode=!0,this}onClick(t,...i){const e=arguments.length==0?[]:[t];return h(this,"onClick",["Function"],e),this._onClickFunction=t,this._onClickArguments=i,this}page(t){return this._stay&&b(this,"page","page() is called after stay() has been called. Only one of these may be called on the same Button instance."),h(this,"page",["Page"],arguments),this._page=t,this}stay(){return this._page&&b(this,"stay","stay() is called after page() has been called. Only one of these may be called on the same Button instance."),h(this,"stay",[],arguments),this._stay=!0,this}createAfterDirections(){const t=[];return this._page&&t.push(y.page(this._page).when(this.wasClicked).text(this._text)),t}createElement(t,i){const e=document.createElement("button");return e.classList.add("button"),e.style.backgroundColor="#2222220d",e.style.fontWeight="500",e.style.font="inherit",e.addEventListener("click",()=>{if(this._onClickFunction)try{this._onClickFunction(...this._onClickArguments)}catch(s){t.runtimeSettings.onError(`Error in the method ${this._onClickFunction.name}() passed to Button.onClick(): ${s.toString()}`);return}this._stay||(this.wasClicked=!0,e.dispatchEvent(new CustomEvent("moveon",{bubbles:!0})))}),this._useBBCode?e.innerHTML=D(this._text):e.innerText=this._text,_(this,e),e}}class J extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Html");n(this,"_initializer",null)}initializer(t){return h(this,"initializer",["Function"],arguments),this._initializer=t,this}createElement(t,i){if(!this._initializer)throw"Error in Html component: the configuration method initializer() has never been called.";let e=document.createElement("div");return _(this,e),setTimeout(()=>{try{this._initializer(e)}catch(s){t.runtimeSettings.onError(`Error when running the initializer function passed to Html.initializer(): ${s}.`)}},0),e}}class K extends x{constructor(){super(...arguments);n(this,"_specificTypeName","PaperCircle");n(this,"_radius");n(this,"_centerX");n(this,"_centerY")}radius(t){return h(this,"radius",["number"],arguments),this._radius=t,this}center(t,i){return h(this,"center",["number","number"],arguments),this._centerX=t,this._centerY=i,this}createElement(t,i){const e=super.createElement(t,"ellipse"),{_coordinatesWidth:s,_coordinatesHeight:a}=i,l=this._centerX??s*.5,c=this._centerY??a*.5,d=this._radius??Math.min(s,a)*.25;return e.setAttribute("cx",`${l}`),e.setAttribute("cy",`${a-c}`),e.setAttribute("rx",`${d}`),e.setAttribute("ry",`${d}`),e.setAttribute("fill",this._backgroundColor),e}}class Q extends x{constructor(){super(...arguments);n(this,"_specificTypeName","PaperLine");n(this,"_thickness");n(this,"_startX");n(this,"_startY");n(this,"_endX");n(this,"_endY")}thickness(t){return h(this,"thickness",["number"],arguments),this._thickness=t,this}start(t,i){return h(this,"start",["number","number"],arguments),this._startX=t,this._startY=i,this}end(t,i){return h(this,"end",["number","number"],arguments),this._endX=t,this._endY=i,this}createElement(t,i){const e=super.createElement(t,"line"),{_coordinatesWidth:s,_coordinatesHeight:a}=i;let l=this._startX??s*.25,c=this._startY??a*.25,d=this._endX??s*.75,g=this._endY??a*.75,u=this._thickness??Math.min(s,a)*.01;return e.setAttribute("x1",`${l}`),e.setAttribute("y1",`${a-c}`),e.setAttribute("x2",`${d}`),e.setAttribute("y2",`${a-g}`),e.setAttribute("stroke-width",`${u}`),e.setAttribute("stroke",this._backgroundColor),e.setAttribute("stroke-linecap","round"),e}}class V extends x{constructor(){super(...arguments);n(this,"_specificTypeName","PaperRectangle");n(this,"_width");n(this,"_height");n(this,"_centerX");n(this,"_centerY")}width(t){return h(this,"width",["number"],arguments),this._width=t,this}height(t){return h(this,"height",["number"],arguments),this._height=t,this}center(t,i){return h(this,"center",["number","number"],arguments),this._centerX=t,this._centerY=i,this}createElement(t,i){const e=super.createElement(t,"rect"),{_coordinatesWidth:s,_coordinatesHeight:a}=i,l=this._centerX??s/2,c=this._centerY??a/2,d=this._width??s/2,g=this._height??a/2;return e.setAttribute("x",`${l-d/2}`),e.setAttribute("y",`${a-(c+g/2)}`),e.setAttribute("width",`${d}`),e.setAttribute("height",`${g}`),e.setAttribute("fill",this._backgroundColor),e}}class Z extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Text");n(this,"_text","");n(this,"_left",!1);n(this,"_right",!1);n(this,"_top",!1);n(this,"_bottom",!1);n(this,"_useBBCode",!1)}text(t){return h(this,"text",["string"],arguments),this._text=t,this._useBBCode=!1,this}textWithBBCode(t){return h(this,"textWithBBCode",["string"],arguments),this._text=t,this._useBBCode=!0,this}left(){return h(this,"text",[],arguments),this._left=!0,this}right(){return h(this,"text",[],arguments),this._right=!0,this}top(){return h(this,"text",[],arguments),this._top=!0,this}bottom(){return h(this,"text",[],arguments),this._bottom=!0,this}createElement(t,i){const e=document.createElement("div");e.classList.add("text"),e.style.display="flex",e.style.flexDirection="row",e.style.overflow="auto";const s=document.createElement("span");return s.style.maxWidth="100%",s.style.maxHeight="100%",this._useBBCode?s.innerHTML=D(this._text.trim())||"​":s.innerText=this._text.trim()||"​",e.appendChild(s),_(this,e),this._left?(e.style.justifyContent="start",e.style.textAlign="left"):this._right?(e.style.justifyContent="end",e.style.textAlign="right"):(e.style.justifyContent="center",e.style.textAlign="center"),this._top?e.style.alignItems="start":this._bottom?e.style.alignItems="end":e.style.alignItems="center",e}}class M extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Rows");n(this,"_children",[])}children(...t){const i=t.flat(1/0);return h(this,"children",i.map(e=>"Component"),i),this._children=i.filter(e=>e),this}onAfter(t,i){for(const e of this._children)e.onAfter(t,i)}createAfterDirections(){return this._children.map(t=>t.createAfterDirections()).flat()}createElement(t,i){const e=document.createElement("div");e.classList.add("rows"),e.style.display="grid",e.style.overflow="auto",e.style.boxSizing="border-box";const s=this._children.filter(a=>a._keepIf);for(const a of s){const l=a.createElement(t,this);e.appendChild(l)}return this._onChildUpdated=()=>{e.style.gridTemplateRows=s.map(a=>{const l=a.getGrow();return a.getGrowShrink()?`${l}fr`:l==0?"max-content":`minmax(max-content, ${l}fr)`}).join(" ")},this._onChildUpdated(),_(this,e),e}}class B extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Columns");n(this,"_children",[])}children(...t){const i=t.flat(1/0);return h(this,"children",i.map(e=>"Component"),i),this._children=i.filter(e=>e),this}onAfter(t,i){for(const e of this._children)e.onAfter(t,i)}createAfterDirections(){return this._children.map(t=>t.createAfterDirections()).flat()}createElement(t,i){const e=document.createElement("div");e.classList.add("columns"),e.style.display="grid",e.style.overflow="auto",e.style.boxSizing="border-box";const s=this._children.filter(a=>a._keepIf);for(const a of s)e.appendChild(a.createElement(t,this));return this._onChildUpdated=()=>{e.style.gridTemplateColumns=s.map(a=>{const l=a.getGrow();return a.getGrowShrink()?`${l}fr`:l==0?"max-content":`minmax(max-content, ${l}fr)`}).join(" ")},this._onChildUpdated(),_(this,e),e}}class tt extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Box");n(this,"_width","");n(this,"_height","");n(this,"_left",!1);n(this,"_right",!1);n(this,"_top",!1);n(this,"_bottom",!1);n(this,"_aspectRatioWidth",-1);n(this,"_aspectRatioHeight",-1);n(this,"_child",null)}width(t){return h(this,"width",["number"],arguments),this._width=f(t),this}height(t){return h(this,"height",["number"],arguments),this._height=f(t),this}left(){return h(this,"left",[],arguments),this._left=!0,this}right(){return h(this,"right",[],arguments),this._right=!0,this}top(){return h(this,"top",[],arguments),this._top=!0,this}bottom(){return h(this,"bottom",[],arguments),this._bottom=!0,this}aspectRatio(t,i){return h(this,"aspectRatio",["number","number"],arguments),this._aspectRatioWidth=t,this._aspectRatioHeight=i,this}child(t){return h(this,"child",["Component"],arguments),this._child=t,this}onAfter(t,i){var e;(e=this._child)==null||e.onAfter()}createAfterDirections(){var t;return((t=this._child)==null?void 0:t.createAfterDirections())??[]}createElement(t,i){var s;const e=document.createElement("div");if(e.classList.add("box"),e.style.display="grid",e.style.gridTemplateRows="1fr",e.style.gridTemplateColumns="1fr",e.style.alignItems="center",e.style.justifyItems="center",((s=this._child)==null?void 0:s._keepIf)??!1){const a=document.createElement("div");a.style.display="grid",a.style.gridTemplateRows="1fr",a.style.gridTemplateColumns="1fr",a.style.height="100%",a.style.width="100%",a.appendChild(this._child.createElement(t,this)),e.appendChild(a),this._aspectRatioWidth!=-1&&(a.style.setProperty("--aspect-ratio",`${this._aspectRatioWidth} / ${this._aspectRatioHeight}`),a.style.aspectRatio="var(--aspect-ratio)",this._width==""&&(a.style.width="auto"),this._height==""&&(a.style.height="auto"),this._width==""&&this._height==""&&(i instanceof M?(a.style.width="100%",a.style.maxWidth="100%"):i instanceof B?(a.style.width="100%",a.style.maxWidth="100%",a.style.maxHeight="100%"):i instanceof O&&(e.style.containerType="size",a.style.width="min(100cqw, 100cqh * var(--aspect-ratio))"))),this._width!=""&&this._height!=""&&(e.style.overflow="auto"),this._width!=""&&(a.style.width=this._width),this._height!=""&&(a.style.height=this._height),this._top&&(e.style.alignItems="start"),this._bottom&&(e.style.alignItems="end"),this._left&&(e.style.justifyItems="start"),this._right&&(e.style.justifyItems="end")}return this._child||(this._width!=""&&(e.style.width=this._width),this._height!=""&&(e.style.height=this._height)),_(this,e),e}}class et extends m{constructor(){super(...arguments);n(this,"_specificTypeName","EnterNumber");n(this,"_number","");n(this,"_defaultNumber",0);n(this,"_placeholder","");n(this,"_onChangeFunction",null);n(this,"_onChangeArguments",[]);n(this,"_store",null);n(this,"_storeName","");n(this,"_page",null);n(this,"_pageIfEqual",[]);n(this,"_pageIfBetween",[]);n(this,"_decimals",1/0);n(this,"enteredNumber","")}number(t){return h(this,"number",["number"],arguments),this._number=t,this.enteredNumber=t,this}decimals(t){return h(this,"decimals",["number"],arguments),this._decimals=t,this}defaultNumber(t){return h(this,"defaultNumber",["number"],arguments),this._defaultNumber=t,this}placeholder(t){return h(this,"placeholder",["string"],arguments),this._placeholder=t,this}onChange(t,...i){let e=arguments.length==0?[]:[t];return h(this,"onChange",["Function"],e),this._onChangeFunction=t,this._onChangeArguments=i,this}store(t,i){return h(this,"store",["object","string"],arguments),this._store=t,this._storeName=i,this}page(t){return h(this,"page",["Page"],arguments),this._page=t,this}pageIfEqual(t,i){return h(this,"pageIfEqual",["number","Page"],arguments),this._pageIfEqual.push([t,i]),this}pageIfBetween(t,i,e){return h(this,"pageIfBetween",["number","number","Page"],arguments),this._pageIfBetween.push([t,i,e]),this}pageIfLower(t,i){return h(this,"pageIfLower",["number","Page"],arguments),this._pageIfBetween.push([-1/0,t,i]),this}pageIfHigher(t,i){return h(this,"pageIfHigher",["number","Page"],arguments),this._pageIfBetween.push([t,1/0,i]),this}onAfter(t,i){var s;const e=this.enteredNumber==""||isNaN(this.enteredNumber)?this._defaultNumber:this.enteredNumber;this._store&&(this._store[this._storeName]=e),(s=this._onChangeFunction)==null||s.call(this,e,...this._onChangeArguments)}createAfterDirections(){const t=this.enteredNumber==""||isNaN(this.enteredNumber)?this._defaultNumber:this.enteredNumber,i=[];return i.push(...this._pageIfEqual.map(([e,s])=>y.page(s).when(t==e).text(`enteredNumber == ${e}`))),i.push(...this._pageIfBetween.map(([e,s,a])=>y.page(a).when(e<t&&t<s).text(`${e} < enteredNumber < ${s}`))),this._page&&i.push(y.page(this._page).when(!0).text("Any number")),i}createElement(t,i){const e=document.createElement("div");e.classList.add("enterNumber"),e.style.display="block",e.style.height="100%",e.style.width="100%";const s=document.createElement("input");return s.type="text",s.setAttribute("size","1"),s.style.display="block",s.style.width="100%",s.style.height="100%",s.style.boxSizing="border-box",s.inputMode="decimal",s.addEventListener("keyup",a=>{if(a.key=="Enter"){if(t.errorMessage)return;e.dispatchEvent(new CustomEvent("moveon",{bubbles:!0}))}}),s.addEventListener("input",a=>{var d;s.value=s.value.replaceAll(/[^-0123456789,.]/g,""),s.value=s.value.replaceAll(/([.,].*?)[.,].*/g,"$1"),[".",","].includes(s.value[0])&&(s.value=s.value.substring(1));const l=(d=s.value.match(/[.,]/))==null?void 0:d[0];this._decimals<=0&&l&&(s.value=s.value.substring(0,s.value.indexOf(l))),0<this._decimals&&l&&(s.value=s.value.substring(0,s.value.indexOf(l)+1+this._decimals)),this.enteredNumber=parseFloat(s.value);const c=this.enteredNumber==""||isNaN(this.enteredNumber)?this._defaultNumber:this.enteredNumber;if(this._store&&(this._store[this._storeName]=c),this._onChangeFunction)try{this._onChangeFunction(c,...this._onChangeArguments)}catch(g){t.runtimeSettings.onError(`Error in the method ${this._onChangeFunction.name}() passed to EnterNumber.onChange(): ${g.toString()}`);return}}),e.appendChild(s),s.value=this._number,s.placeholder=this._placeholder,_(this,e),e}}class rt extends m{constructor(){super(...arguments);n(this,"_specificTypeName","EnterText");n(this,"_text","");n(this,"_placeholder","");n(this,"_onChangeFunction",null);n(this,"_onChangeArguments",[]);n(this,"_store",null);n(this,"_storeName","");n(this,"_page",null);n(this,"_pageIfEqual",[]);n(this,"enteredText","")}text(t){return h(this,"text",["string"],arguments),this._text=t,this.enteredText=t,this}placeholder(t){return h(this,"placeholder",["string"],arguments),this._placeholder=t,this}onChange(t,...i){let e=arguments.length==0?[]:[t];return h(this,"onChange",["Function"],e),this._onChangeFunction=t,this._onChangeArguments=i,this}store(t,i){return h(this,"store",["object","string"],arguments),this._store=t,this._storeName=i,this}page(t){return h(this,"page",["Page"],arguments),this._page=t,this}pageIfEqual(t,i){return h(this,"pageIfEqual",["string","Page"],arguments),this._pageIfEqual.push([t,i]),this}onAfter(t,i){var e;this._store&&(this._store[this._storeName]=this.enteredText),(e=this._onChangeFunction)==null||e.call(this,this.enteredText,...this._onChangeArguments)}createAfterDirections(){const t=this._pageIfEqual.map(([i,e])=>y.page(e).when(this.enteredText==i).text(i));return this._page&&t.push(y.page(this._page).when(!0).text("Any text")),t}createElement(t,i){const e=document.createElement("div");e.classList.add("enterText"),e.style.display="block",e.style.height="100%",e.style.width="100%";const s=document.createElement("input");return s.setAttribute("size","1"),s.style.display="block",s.style.boxSizing="border-box",s.style.width="100%",s.style.height="100%",s.addEventListener("keyup",a=>{if(a.key=="Enter"){if(t.errorMessage)return;e.dispatchEvent(new CustomEvent("moveon",{bubbles:!0}))}}),s.addEventListener("input",a=>{if(this.enteredText=s.value,this._store&&(this._store[this._storeName]=this.enteredText),this._onChangeFunction)try{this._onChangeFunction(this.enteredText,...this._onChangeArguments)}catch(l){t.runtimeSettings.onError(`Error in the method ${this._onChangeFunction.name}() passed to EnterText.onChange(): ${l.toString()}`);return}}),e.appendChild(s),s.value=this._text,s.placeholder=this._placeholder,_(this,e),e}}class it extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Layers");n(this,"_children",[])}children(...t){const i=t.flat(1/0);return h(this,"children",i.map(e=>"Component"),i),this._children=i.filter(e=>e),this}onAfter(t,i){for(const e of this._children)e.onAfter(t,i)}createAfterDirections(){return this._children.map(t=>t.createAfterDirections()).flat()}createElement(t,i){const e=document.createElement("div");e.classList.add("layers"),e.style.display="grid",e.style.gridTemplateRows="1fr",e.style.gridTemplateColumns="1fr",e.style.overflow="auto";const s=this._children.filter(l=>l._keepIf);let a=1;for(const l of s){const c=l.createElement(t,this);c.style.gridRow="1",c.style.gridColumn="1",c.style.zIndex=a,e.appendChild(c),a++}return _(this,e),e}onChildUpdated(t,i){i.style.gridRow="1",i.style.gridColumn="1",i.style.zIndex=Array.from(i.parentNode.children).indexOf(i)+1}}class nt extends m{constructor(){super();n(this,"_specificTypeName","Space");this._grow=1}createElement(t,i){const e=document.createElement("div");return e.classList.add("space"),_(this,e),e}}const w={};function lt(o){var r;(r=w[o])==null||r.call(w)}class st extends m{constructor(){super(...arguments);n(this,"_specificTypeName","Updater");n(this,"_childCreator",()=>null);n(this,"_intervalInMs",-1);n(this,"_intervalId",-1);n(this,"_name","");n(this,"_child",null);n(this,"_parent",null)}childCreator(t){return h(this,"childCreator",["Function"],arguments),this._childCreator=t,this}interval(t){return h(this,"interval",["number"],arguments),this._intervalInMs=t,this}name(t){return this._name=t,this}onAfter(t,i){var e,s;clearInterval(this._intervalId),delete w[this._name],(s=(e=this._child)==null?void 0:e.onAfter)==null||s.call(e,t,i)}createBeforeDirections(){var t,i;return((i=(t=this._child)==null?void 0:t.createBeforeDirections)==null?void 0:i.call(t))??[]}createAfterDirections(t){var i,e;return((e=(i=this._child)==null?void 0:i.createAfterDirections)==null?void 0:e.call(i,t))??[]}createChild(t){var e;try{this._child=this._childCreator()}catch(s){let a="an Updater with no name";this._intervalInMs&&(a=`an Updater with the interval ${this._intervalInMs}ms`),this._name&&(a=`an updater with the name "${this._name}"`),t.runtimeSettings.onError(`Error occurred in the function passed to childCreator() ("${this._childCreator.name}()") called by ${a}: ${s}.`);return}const i=["Paper","PaperGroup"].includes(this._parent._specificTypeName)?"PaperFigure":"Component";if(((e=this._child)==null?void 0:e._generalTypeName)!=i){t.runtimeSettings.onError(`On Updater you called childCreator() and passed it a method, but the method you passed it returned a value of wrong type. This Updater component is used as a child in a ${this._parent._specificTypeName} component, so the method you pass it must return a ${i}, but it did return a ${S(this._child)}.`);return}return this._grow=this._child._grow,this._keepIf=this._child._keepIf,this._child}createElement(t,i){let e=null;this._parent=i;const s=()=>{var l;if(this._child=this.createChild(t),t.errorMessage){e=document.createElement("div");return}const a=this._child.createElement(t,i);e&&(e.parentNode.replaceChild(a,e),(l=i._onChildUpdated)==null||l.call(i)),e=a};return s(),this._name&&(w[this._name]=s),this._intervalInMs!=-1&&!t.runtimeSettings.isPreview&&(this._intervalId=setInterval(s,this._intervalInMs),t.frameworkPage.currentlyRunningIntervalIds.push(this._intervalId)),e}getGrow(){return this._child.getGrow()}getGrowShrink(){return this._child.getGrowShrink()}}const ct=k(W),ut=k(P),y=k(U),dt=k(I),gt=p(q),pt=p(J),mt=p(X),ft=p(K),_t=p(Q),yt=p(V),bt=p(v),Ct=p(Z),wt=p(tt),At=p(B),xt=p(et),kt=p(rt),Et=p(it),$t=p(M),Nt=p(nt),Tt=p(st);export{wt as B,At as C,y as D,xt as E,dt as F,pt as H,Et as L,mt as P,$t as R,Nt as S,Ct as T,Tt as U,gt as a,ut as b,kt as c,_t as d,ft as e,bt as f,yt as g,ct as h,W as i,O as j,x as k,X as l,lt as r,h as v};
